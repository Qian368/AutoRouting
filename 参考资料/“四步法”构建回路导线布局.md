## “四步法”构建回路导线布局
### 相关定义
**受控单元**：将受同一个开关按键控制的一组电器并联连接，形成一个个“控制子单元”<br>
**非受控单元**：不需要开关控制的一组电器（比如插座）并联连接，形成的子单元。<br>
**控制线**：开关和受控电器或受控单元连接的导线。<br>
注意：**非受控单元火线侧 和 受控单元 应相互独立**。即非受控单元的开关的火线侧不可与开关控制出线侧的受控单元相连接，但可与开关火线引入侧相连。

**前提：基于同一回路内，完成单元定义计算（包含受控和非受控电器）**
| 步骤 | 步骤详解 | 关键说明 | 导线变化（导管内） |
| :--- | :--- | :--- | :--- |
| **1. 铺设基础回路**（图层1） | 从配电箱出发，为所有用电设备（灯具）平铺公共的**零线(N)**和**保护地线(PE)**。（不含开关） | **物理起点**：现代安全规范强制要求照明回路包含PE保护地线 | 起始值：2根 |
| **2. 连接非受控单元**（图层2） | **非受控单元整体**并联后选取就近节点接入**配电箱**。 | **一般来说**：单一回路下，配电箱或者电源回路与就近节点只有一根火线。 | 增量：1根电源火线 |
|**3. 连接受控单元**（图层3）  | **受控单元整体**并联后，选取就近节点**（各单元独立引线）**接到各自开关。 | **一般来说**：n联开关，其导线数量为n+1，即一根电源进来，n根控制线出去。 |增量：1根控制线
| **4. 开关接入电源**（图层4） | 从开关引一根电源火线接入就近接入**配电箱**或**非受控单元的电源火线**。 | **最终回路**：本质为电源火线(L)从配电箱拉出后，分支后对各开关或者非受控单元整体进行供电。 | 增量：1根电源火线 |

### 说明
- 上表中包含了受控和不受控电器的情况，此时**优先考虑**非受控单元的连接，把复杂导线布局留到最后。
- 一般情况下，**受控回路和非受控回路应为独立回路**，此时仅需考虑上表步骤2、3选择其一即可。

### 备注
1. **适用范围**：此步骤**不适用于直接施工**，而用于总体规划布局，计算每根导管导线总数，辅助布局导管，规划施工顺序。
2. 进一步推导出简要适用于施工的原则：非受控单元所有电器直接并联后接电源，受控单元零线火线并联，火线以受控单元为单位断开，各受控单元独立连接开关后再统一接到电源。
3. **安全规范**：在任何情况下，**零线(N)和地线(PE)都不允许接入开关的接线端子**。它们在开关盒内顶多只能是“过路”，必须直接、可靠地连接到灯具的对应端子上。
4. **后续拓展**：
- 基于“四步法”可后续拓展到特殊电路上，如：双控开关，需用两根导线连接开关1和开关2，一端开关连接电源火线或配电箱，一端开关连接受控单元或受控电器。
- 可根据此方法精确计算每根导管的导线数。节省导管使用，以及便于排查电路故障问题。
- 便于设计计算、统一设计、施工、造价思维模式。
- 后续为计算机利用图算法实现自动布线提供了理论基础。